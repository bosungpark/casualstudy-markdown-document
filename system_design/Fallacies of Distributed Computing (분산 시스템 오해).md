# Fallacies of Distributed Computing (분산 시스템 오해)

## 출처

* **링크**: [https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing](https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing)

---

## AI 요약

### 이 문서의 본질

이건 “주의사항 목록”이 아니다.
**분산 시스템이 반드시 현실과 충돌하는 지점 8개를, 인간이 반복해서 착각하는 방식으로 정리한 경고문**이다.

핵심 메시지는 하나다:

> **단일 머신에서 자연스러운 가정은, 분산에선 거의 전부 거짓이다.**

---

## 1️⃣ The network is reliable

### “네트워크는 믿을 수 있다”

#### 왜 틀렸나

* 패킷은 유실된다
* 요청은 도착했는데 응답이 사라질 수 있다
* 응답이 늦게 와서 **실패처럼 보일 수 있다**
* TCP도 “성공/실패”를 보장하지 않는다 (연결은 살아있는데 상대가 죽을 수 있음)

#### 실제 사고 패턴

* 타임아웃 없음 → 무한 대기
* 재시도 없음 → 일시 장애가 영구 실패로 전이
* 재시도 있음 → **중복 실행** 발생
* 중복 처리 안 됨 → 데이터 오염

#### 강제되는 설계 원칙

* 모든 네트워크 호출은 **실패가 기본**
* 멱등성(idempotency)은 선택이 아니라 필수
* “성공했는지 모른다” 상태를 처리해야 함

> 분산에서 가장 흔한 버그는 **“이미 실행됐는데 또 실행함”**

---

## 2️⃣ Latency is zero

### “지연은 없다”

#### 왜 틀렸나

* 네트워크 지연은 항상 존재
* 지연은 **불균등**하고 **꼬리가 길다 (P99, P999)**
* GC, VM 스케줄링, 커널 인터럽트도 지연을 만든다

#### 실제 사고 패턴

* 동기 RPC 체인 5~10단 → tail latency 폭발
* UI는 멈췄는데 서버는 “정상”
* 타임아웃을 짧게 잡으면 재시도 폭증
* 길게 잡으면 리소스 고갈

#### 강제되는 설계 원칙

* 동기 호출 깊이 제한
* 비동기/이벤트 기반 선호
* P50이 아니라 **P99 기준으로 설계**
* 타임아웃 = 비즈니스 결정

> “빠르다”는 평균이 아니라 **최악에 대한 약속**

---

## 3️⃣ Bandwidth is infinite

### “대역폭은 무한하다”

#### 왜 틀렸나

* 네트워크는 공유 자원
* 트래픽 급증은 항상 **동시적**
* serialization / compression 비용도 무시 못 함

#### 실제 사고 패턴

* 로그/메트릭 폭증 → 서비스 장애
* 백업/배치 작업이 실시간 트래픽을 잡아먹음
* fan-out 요청 → 네트워크 폭사

#### 강제되는 설계 원칙

* backpressure
* 배치/압축/샘플링
* fan-out → fan-in 구조
* “보내지 않는 것”이 최적화의 시작

---

## 4️⃣ The network is secure

### “네트워크는 안전하다”

#### 왜 틀렸나

* 내부망 ≠ 안전
* 서비스 계정 탈취 → 수평 이동
* 중간자 공격, 잘못된 라우팅, DNS poisoning

#### 실제 사고 패턴

* 내부 API 무인증
* 권한 과도
* 네트워크만 믿고 입력 검증 안 함

#### 강제되는 설계 원칙

* Zero Trust
* 모든 요청 인증/인가
* 내부 API도 공격 표면

> “내부라서 괜찮다” = 사고 전 마지막 말

---

## 5️⃣ Topology doesn’t change

### “구조는 안 바뀐다”

#### 왜 틀렸나

* 노드는 죽고 살아난다
* 오토스케일링
* 리전/존 이동
* 컨테이너 재배치

#### 실제 사고 패턴

* IP 하드코딩
* 상태를 로컬에 저장
* 리더 노드 고정 가정

#### 강제되는 설계 원칙

* 서비스 디스커버리
* 무상태(stateless)
* 리더 교체 가능성 전제

---

## 6️⃣ There is one administrator

### “관리자는 한 명이다”

#### 왜 틀렸나

* 팀/조직/회사/국가가 다르다
* 정책, 보안 규칙, 운영 기준 다름

#### 실제 사고 패턴

* 방화벽 규칙 충돌
* 인증 체계 불일치
* SLA 해석 다름

#### 강제되는 설계 원칙

* 계약(API, SLA)을 코드로 명시
* 운영 자동화
* 인간 조율에 의존하지 않기

---

## 7️⃣ Transport cost is zero

### “전송 비용은 없다”

#### 왜 틀렸나

* 돈 (egress)
* 시간 (운영, 장애)
* 리스크 (장애 범위)

#### 실제 사고 패턴

* 마이크로서비스 과도 분해
* 내부 호출 폭증
* 비용 예측 실패

#### 강제되는 설계 원칙

* 호출 수 = 비용
* 데이터 이동 최소화
* 경계는 신중히 나눠야 함

---

## 8️⃣ The network is homogeneous

### “네트워크는 다 똑같다”

#### 왜 틀렸나

* 언어/OS/라이브러리/버전 다름
* 성능 특성 다름
* 실패 모드 다름

#### 실제 사고 패턴

* 특정 리전만 장애
* 특정 클라이언트만 실패
* 버전 차이로 데이터 해석 오류

#### 강제되는 설계 원칙

* 호환성 테스트
* 점진적 롤아웃
* backward compatibility

---